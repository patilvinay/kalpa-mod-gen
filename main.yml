kalpa:
  import:
    config:
      file: config.yml
      ref: vars
      directory: ./

  play:
    - name: make dir {{item}}
      kalpa-file:
        action: mkdir
        dir: "{{ imported.config.outDir }}"
      loop:
        - "{{ imported.config.outDir }}"
        - "{{ imported.config.outDir }}/lib"

    - name: Render {{item}}
      kalpa-ejs:
        vars:
          template: "{{env.PWD}}/templates/{{item}}"
          dest: "{{ imported.config.outDir }}/{{item}}"
      loop:
        - README.md
        - LICENSE
        - package.json
        - Dockerfile

    - name: Coping {{item}}
      kalpa-ejs:
        vars:
          template: "{{env.PWD}}/templates/{{item}}"
          dest: "{{ imported.config.outDir }}/.{{item}}"
      loop:
        - editorconfig
        - eslintignore
        - gitignore
        - prettier.config.js
        - travis.yml
        - releaserc
        - npmignore

    - name: Coping index.js
      kalpa-ejs:
        vars:
          template: "{{env.PWD}}/templates/index.js"
          dest: "{{ imported.config.outDir }}/lib/index.js"
